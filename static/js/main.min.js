var getQueryStringRegExp=function(a){return(new RegExp("(^|\\?|&)"+a+"=([^&]*)(\\s|&|$)","i")).test(location.href)?unescape(RegExp.$2.replace(/\+/g," ")):null},docCookies={getItem:function(a){return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},setItem:function(a,c,b,e,d,g){if(!a||/^(?:expires|max\-age|path|domain|secure)$/i.test(a))return!1;var f="";if(b)switch(b.constructor){case Number:f=
Infinity===b?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+b;break;case String:f="; expires="+b;break;case Date:f="; expires="+b.toUTCString()}document.cookie=encodeURIComponent(a)+"="+encodeURIComponent(c)+f+(d?"; domain="+d:"")+(e?"; path="+e:"")+(g?"; secure":"");return!0},removeItem:function(a,c,b){if(!a||!this.hasItem(a))return!1;document.cookie=encodeURIComponent(a)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(b?"; domain="+b:"")+(c?"; path="+c:"");return!0},hasItem:function(a){return(new RegExp("(?:^|;\\s*)"+
encodeURIComponent(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=")).test(document.cookie)},keys:function(){for(var a=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),c=0;c<a.length;c++)a[c]=decodeURIComponent(a[c]);return a}};
$(function(){var a=getQueryStringRegExp("code"),c=docCookies.getItem("access_token"),b=$("#repo-list"),e=$(".progress-bar");a&&!c&&$.post("/",{code:a},function(a){a=$.parseJSON(a);a.access_token?(docCookies.setItem("access_token",a.access_token),console.log("set cookie of access token.")):console.log("error")});c&&!a&&console.log("access token already exists.");$("#get-repo-list").click(function(a){a.preventDefault();(a=$("#tar-user").val())?(b.length&&($("#repo-list").empty(),$(".progress-bar").width("0")),
$.get("https://api.github.com/users/"+a+"/starred?per_page=100",function(a){for(var c=[],b=0;b<a.length;b++){var d=a[b].full_name;c.push('<li class="col-md-6 repos"><input class="repo-check" type="checkbox" data-repo="'+d+'" checked><a href="https://github.com/'+d+'">'+d+"</a></li>")}$("#repo-list").append(c);e.width("5%")})):$("#tar-user").focus()});$("#run").click(function(a){a.preventDefault();b.length&&$(".repo-check:checked").each(function(a,b){var d=$(b),e=d.data("repo");$.post("/starring",
{repo:e,accessToken:c},function(a){"200"===a?d.parent().children("a").css("color","#27ae60"):d.parent().children("a").css("color","#c0392b")})})});$("#reset").click(function(a){a.preventDefault();b.empty();e.width("0")})});
